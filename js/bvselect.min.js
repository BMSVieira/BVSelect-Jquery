/*
BVSelect Jquery Plugin
Developed by: Bruno Vieira
*/

!function(d){d.fn.BVSelect=function(t){var e=d(this).attr("id"),s=d(this),n=(d("option",this),Math.floor(1001*Math.random())+0);if("string"==typeof t)return"destroy"==t&&this.each(function(){var t=d(this).next(".bv_mainselect");0<t.length&&(t.remove(),s.css("display","block"))}),"update"==t&&this.each(function(){var t=d(this).next(".bv_mainselect"),i=d(this).next(".bv_mainselect").width()+"px",a=(d(this).next(".bv_mainselect").children().attr("id").replace("main_","ul_"),d(this).next(".bv_mainselect").data("search"));t.remove(),l(s,{width:i,searchbox:a})}),this;function l(t,i){t.after(d('<div id="bv_'+n+'" data-search="'+i.searchbox+'" style="width:'+i.width+';"></div>').addClass("bv_mainselect ").addClass(t.attr("class")||"").addClass(t.attr("disabled")?"disabled":"").attr("tabindex",t.attr("disabled")?null:"0")),d("#bv_"+n).append('<div id="main_'+n+'" class="bv_atual bv_background"></div><ul id="ul_'+n+'" class="bv_ul_inner bv_background"></ul>'),1==i.searchbox&&d("#ul_"+n).prepend('<li class="nofocus"><div class="innerinput"><input placeholder="Search..." class="bv_input" id="input_'+n+'" type="text"></div</li>');var a=d("#main_"+n).width();d("#ul_"+n).css("width",a+20+"px");var s=t.find("option:selected").text();d("#main_"+n).html(s+"<i id='arrow_"+n+"' class='arrows_bv arrow down'></i>"),t.find("option").each(function(t,i){var a=1==i.disabled?"bv_disabled":"",s=1==d(this).data("separator")?"bv_separator":"";d("#ul_"+n).append("<li class='"+a+" "+s+"'  >"+d(this).text()+"</li>")}),d("#main_"+n).click(function(){d(".bv_ul_inner").hide(),d("#ul_"+n).slideDown("fast"),d(".arrows_bv").removeClass("up").addClass("down"),d("#arrow_"+n).removeClass("down").addClass("up")}),d("#ul_"+n).children().click(function(){var t;0==d(this).hasClass("nofocus")&&(t=d(this).index(),d(this).hasClass("bv_disabled")||(d("#main_"+n).html(d(this).text()+" <i id='arrow_"+n+"' class='arrows_bv arrow down'></i>"),d("#"+e).prop("selectedIndex",t).trigger("change"),d("#ul_"+n).slideUp("fast"),d("#input_"+n).val("").keyup()))}),d("#input_"+n).on("keyup",function(){var t=this.value.toLowerCase().trim();d("#ul_"+n+" li").show().filter(function(){if(0==d(this).hasClass("nofocus"))return-1==d(this).text().toLowerCase().trim().indexOf(t)}).hide()}),d(document).on("click.bv_mainselect",function(t){0===d(t.target).closest(".bv_mainselect").length&&(d("#ul_"+n).hide(),d("#arrow_"+n).removeClass("up").addClass("down"),d(".bv_input").val("").keyup())})}return d(this).hide(),l(s,t),this}}(jQuery);